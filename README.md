# DynamicFluency
DynamicFluency is a system designed to help researchers monitor and understand the dynamicity of linguistic aspects in (L2) speech.

It is in early development, and does not have all the expected features. The releases are meant for testing and development only.

---

## Download and install
DynamicFluency, in its core, is a few praat scripts that are interfacing some commandline scripts written in pyhon. To run it, then, you need to have installed both [Praat](http://www.praat.org) and [Python](https://www.python.org/downloads/)

If you wish to install DynamicFluency, you can either **clone the git repo**, or download the system from the **releases tab**. In both cases, all python dependencies still need to be installed with the following command in your terminal of choise:
```
pip3 install nltk pandas
```
To be able to run this command on windows, you need to have install python with pip enabled, which is on by default. Aditionally, you should have the windows-py launcher installed, which also comes with python by default. To be able to run this command on linux you need to install pip (the package is called `python3-pip` for apt and pacman)

If you have cloned the git repo, (skip this paragraph if you installed from archive) you have to initialise the dictionaries to be used for global word frequency, like [SUBTLEXus](https://www.ugent.be/pp/experimentele-psychologie/en/research/documents/subtlexus) or [SUBTLEX-UX](http://crr.ugent.be/archives/1423), with the included `add_frequency_dictionairy.py` script from `resources`. To do this, make sure the column in which the lemma are in the csv-like file is called `Lemma`. Additionally, it should be noted that NLTK will automatically download data the first time DynamicFluency is run.

If you have downloaded the achieve it should first be moved to wherever you want it. Once extracted, it will contain both the code and the directories for input and output of TextGrids. Decompress it with your favourite decompressor; the windows build-in is available in the right-click menu of the file explorer, and is called unzip.

The system is also able to interface with [aeneas](https://www.readbeyond.it/aeneas/). However, the installation if this is tricky on Windows, as it requires compiling C code with pip. (It has terrible output quality if you disable `CEW`.) Follow the installation instructions on their website if you want to use it. If you are running windows, DynamicFluency presumes aeneas is installed on python 2.7, as that appears to be more stable. On linux, aeneas can be installed with pip3 (for python3) if you have `gcc` installed (package called `gcc` on apt and pacman), and can simply be installed following the install instructions on aeneas' website.

---

## Usage

### Main system
Once DynamicFluency is installed, it can be run by running the `dynamicfluency.praat` script. The system expects two thigs as input. First, a sound file, secondly, either a transcription or alignment file. This two files should have the same name, and only differ in file extension. 

If you did not configure aeneas, you have to use an alignment .TextGrid generated by [WebMAUS](https://clarin.phonetik.uni-muenchen.de/BASWebServices/interface/WebMAUSBasic). To do this, go to the site, specify the Language as `English (US)`, and the Output format as `Praat (TextGrid)`, and put the output TextGrids in the same directory as the sound files.

If you did install aeneas, the use can either be a plain transcription in a .txt format, or a TextGrid with one tier with one interval that contains the transcription text as text input. In either case, "." and "," are used to separate phrase boundaries, and words are presumed to be spelled with the same spelling as that of the dictionary you used (by default English US.)

The output will be in a directory separate from the input. This output directory is presumed to be empty, an letting the system output to a non-empty directory can cause the system to halt.

Once you have this set up, the wizard will run you trough the settings. In most cases, the default settings should be fine.

For each input file pair, the system will output a lot of different TextGrids, these are the outputs of the individual components. One of them ends in `.merged.TextGrid`. This is the file that contains all the output. 

### Configuration wizard
Even if you run the main system, settings are read and written to and from a settings file. This is to make runs reproduceable, and to give the ability to save setting configurations. If you want to create a settings file without running the system, you can run `configurationwizard.praat`.

### Individual python scripts
Many of the components of DynamicFluency are simple python scripts, that can also be accessed from the command line. At the moment, the input they expect and the output they give is still tied to the main application, but this is to be changed in later versions.

---

## Output

The output TextGrid will contain several tiers.

| Tier |  |
| --- | --- |
Nuclei (Only point tier) | Syllable Nuclei, used for finding filled pauses
Phrases | Phrases to separate types of filled pauses 
DFauto | Filled pauses.
Force-alignment tiers | The tiers used for force alignment
POStags | Force-aligned words, concatenated with their POS
Repetitions | a number scaling from 0 (never used before) 1 (the same as the previous word)
FreqDist | Relative frequency distribution of words over the file
Frequency Tiers | Tiers with the data provided from the dictionary, by default SUBTLEXus
